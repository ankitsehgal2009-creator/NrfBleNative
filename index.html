<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cryostat Microtome — 3D Control UI with Joystick, LEDs & Telemetry</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root { --bg:#e8f0f2; --card:#fff; --accent:#00bfa6; --accent-dark:#009b85; --led-on:#00ff9c; --led-off:#d1d6d9; }
    *{box-sizing:border-box} html,body{height:100%;margin:0;font-family:Inter,system-ui,sans-serif}
    body{display:flex;align-items:center;justify-content:center;background:linear-gradient(145deg,#dfe9eb,#f7fcfc)}
    .phone{width:400px;height:850px;border-radius:40px;padding:20px;background:linear-gradient(145deg,#f9ffff,#e1ebeb);box-shadow:20px 20px 50px rgba(0,0,0,.25),-10px -10px 30px rgba(255,255,255,.7);display:flex;flex-direction:column}
    .title{background:linear-gradient(145deg,#eaf5f5,#cce1e1);padding:10px 20px;border-radius:16px;font-weight:700}
    .tiles{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:14px}
    .tile{height:86px;border-radius:14px;background:linear-gradient(145deg,var(--accent),var(--accent-dark));color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;box-shadow:6px 6px 12px rgba(0,0,0,.18),-6px -6px 12px rgba(255,255,255,.12)}
    .control-card{margin-top:16px;background:linear-gradient(145deg,#f1f7f7,#d6e0e0);padding:14px;border-radius:14px;display:flex;gap:12px;align-items:center}
    .slider{flex:1}
    input[type=range]{width:100%;height:12px;border-radius:8px;background:linear-gradient(90deg,var(--accent),var(--accent-dark));-webkit-appearance:none}
    input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:28px;height:28px;border-radius:50%;background:linear-gradient(145deg,#fff,#cbd7d7);box-shadow:3px 3px 8px rgba(0,0,0,.18)}
    .meter{width:48px;height:120px;border-radius:12px;background:linear-gradient(145deg,#f1f6f6,#c9dada);position:relative;overflow:hidden}
    .meter-fill{position:absolute;bottom:0;width:100%;background:linear-gradient(180deg,var(--accent),var(--accent-dark));height:50%;transition:height .15s linear}
    .leds{display:flex;gap:12px;justify-content:center;margin-top:12px}
    .led{width:16px;height:16px;border-radius:50%;background:var(--led-off);box-shadow:inset 0 0 6px rgba(0,0,0,.25);transition:all .18s}
    .led.on{background:var(--led-on);box-shadow:0 0 10px var(--led-on)}
    .joystick{width:150px;height:150px;border-radius:50%;margin:12px auto;background:radial-gradient(circle at 30% 30%,#eaf5f5,#cce1e1);position:relative;box-shadow:inset 10px 10px 20px #b3c3c3,inset -10px -10px 20px #fff}
    .stick{width:60px;height:60px;border-radius:50%;background:linear-gradient(145deg,#fff,#c6d5d5);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);box-shadow:6px 6px 12px rgba(0,0,0,.3);transition:transform .06s linear}
    .bottom{margin-top:auto;display:flex;flex-direction:column;gap:12px}
    .button-row{display:flex;gap:12px;align-items:center;justify-content:center}
    .btn{border:none;border-radius:50%;padding:0;color:#fff;background:linear-gradient(145deg,var(--accent),var(--accent-dark));box-shadow:8px 8px 20px rgba(0,0,0,.25);cursor:pointer}
    .btn-small{width:64px;height:64px;font-weight:700}
    .btn-large{width:110px;height:110px;font-weight:800;font-size:18px}
    .connect{display:flex;gap:10px;align-items:center;justify-content:center}
    .toggle{width:50px;height:28px;border-radius:20px;padding:3px;background:linear-gradient(145deg,#e1f3f3,#b5c8c8);display:flex;align-items:center}
    .thumb{width:22px;height:22px;border-radius:50%;background:linear-gradient(145deg,#fff,#b5c5c5);transform:translateX(0);transition:transform .25s}
    .toggle.on{background:linear-gradient(145deg,var(--accent),var(--accent-dark))}
    .toggle.on .thumb{transform:translateX(22px)}
    .transport{display:flex;gap:8px;align-items:center;justify-content:center;margin-top:8px}
    select,input[type=text]{padding:8px;border-radius:8px;border:1px solid #d7e5e5}
    .small{font-size:12px;color:#5b6f73}
    .log{height:84px;overflow:auto;background:#0b1111;color:#b9fff0;padding:8px;border-radius:8px;font-family:monospace;font-size:12px}
  </style>
</head>
<body>
  <div class="phone" role="application" aria-label="Cryostat control">
    <div class="title">Cryostat Control — Telemetry Demo</div>

    <div class="tiles">
      <div class="tile" id="tile-temp">Temperature: -- °C</div>
      <div class="tile" id="tile-thick">Thickness: -- µm</div>
      <div class="tile" id="tile-speed">Speed: -- RPM</div>
      <div class="tile" id="tile-motor">Motor: --</div>
    </div>

    <div class="control-card">
      <div class="slider">
        <label class="small" for="range">Thickness</label>
        <input id="range" type="range" min="0" max="100" value="50">
      </div>
      <div class="meter"><div class="meter-fill" id="meterFill"></div></div>
    </div>

    <div class="leds">
      <div class="led" id="led1"></div>
      <div class="led" id="led2"></div>
      <div class="led" id="led3"></div>
    </div>

    <div class="joystick" id="joystick" aria-label="joystick">
      <div class="stick" id="stick" role="application"></div>
    </div>

    <div class="transport">
      <label class="small">Transport</label>
      <select id="transportSelect">
        <option value="console">Console (default)</option>
        <option value="ble" selected>Web Bluetooth</option>
      </select>
      <button id="connectTransport" class="small">Connect</button>
    </div>

    <div class="log" id="log">log: ready</div>

    <div class="bottom">
      <div class="button-row">
        <button class="btn btn-small" id="send">Send</button>
        <button class="btn btn-large" id="start">Start</button>
        <button class="btn btn-small" id="stop">Stop</button>
      </div>
    </div>
  </div>

  <script src="ble.js"></script>
</body>
</html>
